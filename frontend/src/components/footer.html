<!--
  Footer Component HTML Structure
  
  This component provides the HTML template for the configurable footer.
  It displays copyright text and navigation links to static pages.
  Uses Alpine.js for reactive behavior and Tailwind CSS for styling.
-->

<footer 
  data-testid="footer" 
  class="footer-component mt-auto bg-gray-50 border-t border-gray-200"
  x-data="footerComponent"
  x-init="initializeFooter()"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
    <!-- Loading state -->
    <div x-show="loading" class="text-center text-gray-500">
      <div class="inline-flex items-center">
        <svg class="animate-spin -ml-1 mr-3 h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        Loading footer...
      </div>
    </div>

    <!-- Error state -->
    <div x-show="error" class="text-center text-red-600 text-sm">
      <p x-text="errorMessage"></p>
      <button 
        @click="retryLoad()" 
        class="ml-2 text-red-600 hover:text-red-800 underline"
        x-show="canRetry"
      >
        Retry
      </button>
    </div>

    <!-- Main footer content -->
    <div x-show="!loading && !error" class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
      
      <!-- Copyright text -->
      <div class="footer-text mb-4 sm:mb-0">
        <p class="text-sm text-gray-600" x-html="copyrightText"></p>
      </div>

      <!-- Navigation links -->
      <nav 
        class="footer-nav" 
        x-show="navigationLinks.length >= 1"
        aria-label="Footer navigation"
      >
        <ul class="flex flex-wrap gap-4 sm:gap-6">
          <template x-for="link in navigationLinks" :key="link.pageId">
            <li>
              <!-- Internal page link -->
              <a 
                x-show="!link.isExternal"
                :href="link.href"
                :data-page="link.pageId"
                :aria-current="link.pageId === currentPage ? 'page' : null"
                :class="{
                  'text-blue-600 font-medium': link.pageId === currentPage,
                  'text-gray-600 hover:text-gray-900': link.pageId !== currentPage
                }"
                class="text-sm transition-colors duration-150 ease-in-out cursor-pointer"
                @click="handleLinkClick($event, link)"
                x-text="link.text"
              ></a>
              
              <!-- External link -->
              <a 
                x-show="link.isExternal"
                :href="link.href"
                :data-page="link.pageId"
                target="_blank"
                rel="noopener noreferrer"
                class="external-link text-sm text-gray-600 hover:text-gray-900 transition-colors duration-150 ease-in-out inline-flex items-center"
                @click="handleExternalLink($event, link)"
              >
                <span x-text="link.text"></span>
                <svg class="w-3 h-3 ml-1 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
              </a>
            </li>
          </template>
        </ul>
      </nav>
    </div>

    <!-- Mobile responsive adjustments -->
    <div class="sm:hidden" x-show="!loading && !error && navigationLinks.length > 0">
      <div class="mt-4 pt-4 border-t border-gray-200">
        <p class="text-xs text-gray-500 text-center">
          <span x-text="navigationLinks.length"></span> 
          <span x-text="navigationLinks.length === 1 ? 'page' : 'pages'"></span> 
          available
        </p>
      </div>
    </div>
  </div>

  <!-- Screen reader announcements -->
  <div 
    class="sr-only" 
    aria-live="polite" 
    x-text="screenReaderAnnouncement"
  ></div>

  <!-- Development/Debug info (only in dev mode) -->
  <div 
    x-show="$store.debug && $store.debug.enabled" 
    class="bg-yellow-50 border-t border-yellow-200 px-4 py-2"
  >
    <details class="text-xs text-yellow-800">
      <summary class="cursor-pointer">Footer Debug Info</summary>
      <div class="mt-2 space-y-1">
        <div>Files loaded: <span x-text="navigationLinks.length"></span></div>
        <div>Current page: <span x-text="currentPage || 'none'"></span></div>
        <div>Last API call: <span x-text="lastApiCall"></span></div>
        <div>Error count: <span x-text="errorCount"></span></div>
      </div>
    </details>
  </div>

  <!-- Content Modal for internal pages -->
  <div 
    x-show="showContentModal" 
    x-transition.opacity
    class="modal-overlay"
    aria-labelledby="modal-title" 
    role="dialog" 
    aria-modal="true"
    x-ref="contentModal"
    tabindex="-1"
    @keydown.escape="closeContentModal()"
  >
    <!-- Background overlay with blur effect -->
    <div 
      class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm transition-opacity"
      @click="closeContentModal()"
    ></div>
    
    <!-- Modal panel with app styling -->
    <div class="flex min-h-full items-center justify-center p-4">
      <div 
        class="modal-content relative bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[85vh] overflow-hidden"
        x-transition:enter="ease-out duration-300"
        x-transition:enter-start="opacity-0 translate-y-4 scale-95"
        x-transition:enter-end="opacity-100 translate-y-0 scale-100"
        x-transition:leave="ease-in duration-200"
        x-transition:leave-start="opacity-100 translate-y-0 scale-100"
        x-transition:leave-end="opacity-0 translate-y-4 scale-95"
      >
        <!-- Modal header with gradient -->
        <div class="card-header bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-xl font-bold text-gray-900" id="modal-title" x-text="modalTitle"></h3>
            <button 
              @click="closeContentModal()"
              class="text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-xl hover:bg-white hover:bg-opacity-50"
              aria-label="Close modal"
            >
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Modal content with enhanced styling -->
        <div class="card-body overflow-y-auto max-h-[60vh]">
          <div class="prose prose-lg prose-blue max-w-none" x-html="modalContent"></div>
        </div>
        
        <!-- Modal actions with app button styling -->
        <div class="card-header border-t border-gray-200 flex justify-end gap-3 bg-gray-50">
          <button 
            type="button" 
            class="btn btn-secondary"
            @click="closeContentModal()"
          >
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</footer>

<!-- 
  Progressive Enhancement Notes:
  
  Without JavaScript:
  - Footer will show basic copyright text
  - Navigation links will still be functional (if server-rendered)
  - No loading states or interactive features
  
  With JavaScript disabled:
  - Alpine.js directives are ignored
  - Fallback content should be provided by server
  - Basic styling remains via Tailwind classes
  
  Responsive Behavior:
  - Mobile: Stacked layout, navigation below copyright
  - Desktop: Horizontal layout, copyright left, navigation right
  - All touch targets meet minimum 44px requirements
  
  Accessibility:
  - ARIA labels and landmarks
  - Screen reader announcements for dynamic content
  - Keyboard navigation support
  - High contrast support via semantic colors
  - Current page indication for screen readers
-->